---
/**
 * CSVCTASection.astro
 * Reusable renderer for CSV-driven CTA section
 * 
 * Renders a CTA section using CSV data:
 * - cta_primary_text: Required, rendered as primary button
 * - cta_secondary_text: Optional, only rendered if NOT "—"
 */

interface Props {
  cta_primary_text?: string;
  cta_secondary_text?: string;
  variant?: 'default' | 'minimal';
}

const { cta_primary_text, cta_secondary_text, variant = 'default' } = Astro.props;

// Only render if primary CTA exists
const shouldRender = cta_primary_text && cta_primary_text.trim() !== '';
const showSecondary = cta_secondary_text && cta_secondary_text !== '—' && cta_secondary_text.trim() !== '';
---

{shouldRender && variant === 'default' && (
  <section class="py-16 bg-primary text-primary-foreground">
    <div class="container text-center">
      <h2 class="text-2xl md:text-3xl font-bold mb-6">Bereit für Ihr Projekt?</h2>
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <a 
          href="/kontakt" 
          class="inline-flex items-center justify-center px-8 py-4 bg-white text-primary font-semibold rounded-lg hover:bg-white/90 transition-colors min-w-[200px]"
        >
          {cta_primary_text}
        </a>
        {showSecondary && (
          <a 
            href="/kontakt?type=beratung" 
            class="inline-flex items-center justify-center px-8 py-4 bg-transparent border-2 border-white text-white font-semibold rounded-lg hover:bg-white/10 transition-colors min-w-[200px]"
          >
            {cta_secondary_text}
          </a>
        )}
      </div>
    </div>
  </section>
)}

{shouldRender && variant === 'minimal' && (
  <div class="flex flex-col sm:flex-row gap-4 justify-center items-center py-8">
    <a 
      href="/kontakt" 
      class="inline-flex items-center justify-center px-6 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition-colors"
    >
      {cta_primary_text}
    </a>
    {showSecondary && (
      <a 
        href="/kontakt?type=beratung" 
        class="inline-flex items-center justify-center px-6 py-3 bg-transparent border border-primary text-primary font-semibold rounded-lg hover:bg-primary/5 transition-colors"
      >
        {cta_secondary_text}
      </a>
    )}
  </div>
)}
