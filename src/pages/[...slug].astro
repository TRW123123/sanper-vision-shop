---
import LandingPageLayout from "@/layouts/LandingPageLayout.astro";
import landingPages from "@/data/landing_pages.json";
import { Button } from "@/components/ui/button";
import { Check, Star, Shield, ArrowRight } from "lucide-react";
import { ProjectGallery } from "@/components/home/ProjectGallery";

// ... (existing imports)

// Map images for gallery (skipping the first one which is hero)
const galleryItems = page.images?.slice(1).map((img) => ({
    image: `/images/${img}.jpg`,
    title: page.h1, // Use H1 as title for now
    category: page.title.split("|")[0].trim() // Use main title part as category
})) || [];

// ...

  {/* MANUFACTURER TRUST BLOCK (Static for now, dynamic later) */}
  <section class="py-20 bg-surface">
    <div class="container">
        <div class="flex flex-col lg:flex-row items-center gap-12">
            <div class="flex-1 space-y-6">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-md bg-accent/10 text-accent font-medium text-sm">
                    <Shield className="w-4 h-4" />
                    Sanper Vision Versprechen
                </div>
                <h2 class="text-3xl md:text-4xl font-bold">Warum Kunden uns vertrauen</h2>
                <div class="space-y-4">
                    <div class="flex gap-4">
                        <div class="w-10 h-10 rounded-full bg-background flex items-center justify-center shadow-sm shrink-0 border border-border">
                            <span class="font-bold text-primary">01</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">Keine Zwischenhändler</h3>
                            <p class="text-muted-foreground">Sie kaufen direkt ab Werk. Das spart Kosten und garantiert direkte Kommunikation.</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="w-10 h-10 rounded-full bg-background flex items-center justify-center shadow-sm shrink-0 border border-border">
                             <span class="font-bold text-primary">02</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">Alles aus einer Hand</h3>
                            <p class="text-muted-foreground">Von der Beratung über das Aufmaß bis zur Montage - wir kümmern uns um alles.</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="w-10 h-10 rounded-full bg-background flex items-center justify-center shadow-sm shrink-0 border border-border">
                             <span class="font-bold text-primary">03</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">5 Jahre Garantie</h3>
                            <p class="text-muted-foreground">Wir stehen zu unserer Qualität. Auf alle Systeme geben wir 5 Jahre volle Herstellergarantie.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex-1 relative">
                <div class="aspect-square rounded-2xl overflow-hidden shadow-2xl relative z-10 bg-muted">
                    {/* Showroom/Trust Image */}
                     <img 
                        src="/images/showroom_consultation_germany.jpg" 
                        alt="Sanper Showroom Dortmund"
                        class="w-full h-full object-cover"
                        onError={(e) => e.currentTarget.style.display = 'none'}
                      />
                </div>
                {/* Decorative Elements */}
                <div class="absolute -bottom-6 -right-6 w-full h-full border-2 border-primary/20 rounded-2xl -z-10"></div>
            </div>
        </div>
    </div>
  </section>

  {/* DYNAMIC PROJECT GALLERY */}
  {galleryItems.length > 0 && (
    <ProjectGallery client:visible items={galleryItems} />
  )}

  {/* FAQ SECTION */}
  {page.faq && page.faq.length > 0 && (
    <section class="py-20 bg-background">
      <div class="container max-w-3xl">
        <h2 class="text-3xl font-bold text-center mb-12">Häufige Fragen</h2>
        <div class="space-y-4">
          {page.faq.map((item) => (
            <div class="p-6 rounded-xl border border-border bg-card hover:shadow-sm transition-shadow">
              <h3 class="font-semibold text-lg mb-2 flex items-center gap-3">
                <span class="text-primary/60">?</span> {item.question}
              </h3>
              <p class="text-muted-foreground pl-6 border-l-2 border-primary/20 ml-1.5">{item.answer}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  {/* LEAD CAPTURE / FINAL CTA */}
  <section id="kontakt" class="py-24 bg-primary text-primary-foreground relative overflow-hidden">
    <div class="absolute top-0 right-0 w-1/2 h-full bg-white/5 skew-x-12 transform origin-bottom"></div>
    <div class="container relative z-10 text-center">
      <h2 class="text-3xl md:text-5xl font-bold mb-6">Starten Sie Ihr Projekt</h2>
      <p class="text-xl opacity-90 mb-10 max-w-2xl mx-auto">
        Lassen Sie sich kostenlos beraten oder fordern Sie direkt ein unverbindliches Angebot an. Wir melden uns innerhalb von 24 Stunden.
      </p>
      
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button size="lg" variant="secondary" className="min-w-[220px] h-14 text-lg shadow-xl" asChild>
            <a href="/kontakt?type=beratung">Beratungstermin vereinbaren</a>
        </Button>
      </div>
    </div>
  </section>

  {/* INTERNAL LINKING / BREADCRUMB SECTION */}
  <section class="py-12 bg-muted/30 border-t border-border">
    <div class="container">
      <div class="flex flex-col md:flex-row justify-between items-start gap-8">
        
        {/* Breadcrumb / Parent Link */}
        <div>
          <h3 class="text-sm font-semibold uppercase tracking-wider text-muted-foreground mb-4">Übergeordnet</h3>
          <ul class="space-y-2">
            <li>
              <a href="/" class="text-primary hover:underline flex items-center gap-2">
                <ArrowRight class="w-4 h-4" /> Startseite
              </a>
            </li>
            {parentPage && (
              <li>
                <a href={`/${parentPage.slug}`} class="text-primary hover:underline flex items-center gap-2">
                  <ArrowRight class="w-4 h-4" /> {parentPage.title}
                </a>
              </li>
            )}
            {!parentPage && currentSlug !== "" && (
               <li>
                <a href="/produkte" class="text-muted-foreground cursor-default flex items-center gap-2">
                  <span class="w-4 h-4"></span> {page.h1} (Aktuell)
                </a>
              </li>
            )}
          </ul>
        </div>

        {/* Related Pages (Siblings or Children) */}
        {relatedPages.length > 0 && (
          <div>
            <h3 class="text-sm font-semibold uppercase tracking-wider text-muted-foreground mb-4">
              {isHub ? "Beliebte Varianten" : "Ähnliche Systeme"}
            </h3>
            <ul class="grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-2">
              {relatedPages.map(rel => (
                <li>
                  <a href={`/${rel.slug}`} class="text-foreground hover:text-primary transition-colors flex items-center gap-2">
                    <span class="w-1.5 h-1.5 rounded-full bg-primary/60"></span>
                    {rel.h1}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        )}

      </div>
    </div>
  </section>

</LandingPageLayout>
